/*! For license information please see SnapshotsView-stories.7530547b.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunknetwork_design_web=self.webpackChunknetwork_design_web||[]).push([[6801],{"./node_modules/@radix-ui/react-popper/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ee:()=>Anchor,Eh:()=>dist_Arrow,VY:()=>Content,fC:()=>Root2,D7:()=>createPopperScope});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),floating_ui_react_dom=__webpack_require__("./node_modules/@floating-ui/react-dom/dist/floating-ui.react-dom.mjs"),floating_ui_dom=__webpack_require__("./node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs"),dist=__webpack_require__("./node_modules/@radix-ui/react-primitive/dist/index.mjs"),jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),Arrow=react.forwardRef((props,forwardedRef)=>{const{children,width=10,height=5,...arrowProps}=props;return(0,jsx_runtime.jsx)(dist.WV.svg,{...arrowProps,ref:forwardedRef,width,height,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:props.asChild?children:(0,jsx_runtime.jsx)("polygon",{points:"0,0 30,0 15,10"})})});Arrow.displayName="Arrow";var Root=Arrow,react_compose_refs_dist=__webpack_require__("./node_modules/@radix-ui/react-compose-refs/dist/index.mjs"),react_context_dist=__webpack_require__("./node_modules/@radix-ui/react-context/dist/index.mjs"),react_use_callback_ref_dist=__webpack_require__("./node_modules/@radix-ui/react-use-callback-ref/dist/index.mjs"),react_use_layout_effect_dist=__webpack_require__("./node_modules/@radix-ui/react-use-layout-effect/dist/index.mjs"),react_use_size_dist=__webpack_require__("./node_modules/@radix-ui/react-use-size/dist/index.mjs"),[createPopperContext,createPopperScope]=(0,react_context_dist.b)("Popper"),[PopperProvider,usePopperContext]=createPopperContext("Popper"),Popper=props=>{const{__scopePopper,children}=props,[anchor,setAnchor]=react.useState(null);return(0,jsx_runtime.jsx)(PopperProvider,{scope:__scopePopper,anchor,onAnchorChange:setAnchor,children})};Popper.displayName="Popper";var PopperAnchor=react.forwardRef((props,forwardedRef)=>{const{__scopePopper,virtualRef,...anchorProps}=props,context=usePopperContext("PopperAnchor",__scopePopper),ref=react.useRef(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,ref);return react.useEffect(()=>{context.onAnchorChange(virtualRef?.current||ref.current)}),virtualRef?null:(0,jsx_runtime.jsx)(dist.WV.div,{...anchorProps,ref:composedRefs})});PopperAnchor.displayName="PopperAnchor";var[PopperContentProvider,useContentContext]=createPopperContext("PopperContent"),PopperContent=react.forwardRef((props,forwardedRef)=>{const{__scopePopper,side="bottom",sideOffset=0,align="center",alignOffset=0,arrowPadding=0,avoidCollisions=!0,collisionBoundary=[],collisionPadding:collisionPaddingProp=0,sticky="partial",hideWhenDetached=!1,updatePositionStrategy="optimized",onPlaced,...contentProps}=props,context=usePopperContext("PopperContent",__scopePopper),[content,setContent]=react.useState(null),composedRefs=(0,react_compose_refs_dist.e)(forwardedRef,node=>setContent(node)),[arrow,setArrow]=react.useState(null),arrowSize=(0,react_use_size_dist.t)(arrow),arrowWidth=arrowSize?.width??0,arrowHeight=arrowSize?.height??0,desiredPlacement=side+("center"!==align?"-"+align:""),collisionPadding="number"==typeof collisionPaddingProp?collisionPaddingProp:{top:0,right:0,bottom:0,left:0,...collisionPaddingProp},boundary=Array.isArray(collisionBoundary)?collisionBoundary:[collisionBoundary],hasExplicitBoundaries=boundary.length>0,detectOverflowOptions={padding:collisionPadding,boundary:boundary.filter(isNotNull),altBoundary:hasExplicitBoundaries},{refs,floatingStyles,placement,isPositioned,middlewareData}=(0,floating_ui_react_dom.YF)({strategy:"fixed",placement:desiredPlacement,whileElementsMounted:(...args)=>(0,floating_ui_dom.Me)(...args,{animationFrame:"always"===updatePositionStrategy}),elements:{reference:context.anchor},middleware:[(0,floating_ui_react_dom.cv)({mainAxis:sideOffset+arrowHeight,alignmentAxis:alignOffset}),avoidCollisions&&(0,floating_ui_react_dom.uY)({mainAxis:!0,crossAxis:!1,limiter:"partial"===sticky?(0,floating_ui_react_dom.dr)():void 0,...detectOverflowOptions}),avoidCollisions&&(0,floating_ui_react_dom.RR)({...detectOverflowOptions}),(0,floating_ui_react_dom.dp)({...detectOverflowOptions,apply:({elements,rects,availableWidth,availableHeight})=>{const{width:anchorWidth,height:anchorHeight}=rects.reference,contentStyle=elements.floating.style;contentStyle.setProperty("--radix-popper-available-width",`${availableWidth}px`),contentStyle.setProperty("--radix-popper-available-height",`${availableHeight}px`),contentStyle.setProperty("--radix-popper-anchor-width",`${anchorWidth}px`),contentStyle.setProperty("--radix-popper-anchor-height",`${anchorHeight}px`)}}),arrow&&(0,floating_ui_react_dom.x7)({element:arrow,padding:arrowPadding}),transformOrigin({arrowWidth,arrowHeight}),hideWhenDetached&&(0,floating_ui_react_dom.Cp)({strategy:"referenceHidden",...detectOverflowOptions})]}),[placedSide,placedAlign]=getSideAndAlignFromPlacement(placement),handlePlaced=(0,react_use_callback_ref_dist.W)(onPlaced);(0,react_use_layout_effect_dist.b)(()=>{isPositioned&&handlePlaced?.()},[isPositioned,handlePlaced]);const arrowX=middlewareData.arrow?.x,arrowY=middlewareData.arrow?.y,cannotCenterArrow=0!==middlewareData.arrow?.centerOffset,[contentZIndex,setContentZIndex]=react.useState();return(0,react_use_layout_effect_dist.b)(()=>{content&&setContentZIndex(window.getComputedStyle(content).zIndex)},[content]),(0,jsx_runtime.jsx)("div",{ref:refs.setFloating,"data-radix-popper-content-wrapper":"",style:{...floatingStyles,transform:isPositioned?floatingStyles.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:contentZIndex,"--radix-popper-transform-origin":[middlewareData.transformOrigin?.x,middlewareData.transformOrigin?.y].join(" "),...middlewareData.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:props.dir,children:(0,jsx_runtime.jsx)(PopperContentProvider,{scope:__scopePopper,placedSide,onArrowChange:setArrow,arrowX,arrowY,shouldHideArrow:cannotCenterArrow,children:(0,jsx_runtime.jsx)(dist.WV.div,{"data-side":placedSide,"data-align":placedAlign,...contentProps,ref:composedRefs,style:{...contentProps.style,animation:isPositioned?void 0:"none"}})})})});PopperContent.displayName="PopperContent";var OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=react.forwardRef(function PopperArrow2(props,forwardedRef){const{__scopePopper,...arrowProps}=props,contentContext=useContentContext("PopperArrow",__scopePopper),baseSide=OPPOSITE_SIDE[contentContext.placedSide];return(0,jsx_runtime.jsx)("span",{ref:contentContext.onArrowChange,style:{position:"absolute",left:contentContext.arrowX,top:contentContext.arrowY,[baseSide]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[contentContext.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[contentContext.placedSide],visibility:contentContext.shouldHideArrow?"hidden":void 0},children:(0,jsx_runtime.jsx)(Root,{...arrowProps,ref:forwardedRef,style:{...arrowProps.style,display:"block"}})})});function isNotNull(value){return null!==value}PopperArrow.displayName="PopperArrow";var transformOrigin=options=>({name:"transformOrigin",options,fn(data){const{placement,rects,middlewareData}=data,isArrowHidden=0!==middlewareData.arrow?.centerOffset,arrowWidth=isArrowHidden?0:options.arrowWidth,arrowHeight=isArrowHidden?0:options.arrowHeight,[placedSide,placedAlign]=getSideAndAlignFromPlacement(placement),noArrowAlign={start:"0%",center:"50%",end:"100%"}[placedAlign],arrowXCenter=(middlewareData.arrow?.x??0)+arrowWidth/2,arrowYCenter=(middlewareData.arrow?.y??0)+arrowHeight/2;let x="",y="";return"bottom"===placedSide?(x=isArrowHidden?noArrowAlign:`${arrowXCenter}px`,y=-arrowHeight+"px"):"top"===placedSide?(x=isArrowHidden?noArrowAlign:`${arrowXCenter}px`,y=`${rects.floating.height+arrowHeight}px`):"right"===placedSide?(x=-arrowHeight+"px",y=isArrowHidden?noArrowAlign:`${arrowYCenter}px`):"left"===placedSide&&(x=`${rects.floating.width+arrowHeight}px`,y=isArrowHidden?noArrowAlign:`${arrowYCenter}px`),{data:{x,y}}}});function getSideAndAlignFromPlacement(placement){const[side,align="center"]=placement.split("-");return[side,align]}var Root2=Popper,Anchor=PopperAnchor,Content=PopperContent,dist_Arrow=PopperArrow},"./node_modules/@radix-ui/react-use-size/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>useSize});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_use_layout_effect__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-use-layout-effect/dist/index.mjs");function useSize(element){const[size,setSize]=react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0);return(0,_radix_ui_react_use_layout_effect__WEBPACK_IMPORTED_MODULE_1__.b)(()=>{if(element){setSize({width:element.offsetWidth,height:element.offsetHeight});const resizeObserver=new ResizeObserver(entries=>{if(!Array.isArray(entries))return;if(!entries.length)return;const entry=entries[0];let width,height;if("borderBoxSize"in entry){const borderSizeEntry=entry.borderBoxSize,borderSize=Array.isArray(borderSizeEntry)?borderSizeEntry[0]:borderSizeEntry;width=borderSize.inlineSize,height=borderSize.blockSize}else width=element.offsetWidth,height=element.offsetHeight;setSize({width,height})});return resizeObserver.observe(element,{box:"border-box"}),()=>resizeObserver.unobserve(element)}setSize(void 0)},[element]),size}},"./src/stories/SnapshotsView.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>SnapshotsView_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),ui_button=__webpack_require__("./src/components/ui/button.tsx"),react_icons_esm=__webpack_require__("./node_modules/@radix-ui/react-icons/dist/react-icons.esm.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),scenario=__webpack_require__("./src/store/scenario.ts"),next_navigation=__webpack_require__("./.storybook/__mocks__/next-navigation.js"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),dist=__webpack_require__("./node_modules/sonner/dist/index.mjs");var console=__webpack_require__("./node_modules/console-browserify/index.js");function SnapshotItemScenario({data,snapshot}){const router=(0,next_navigation.t)(),{setView,update}=(0,scenario.r)(),[isDeleting,setIsDeleting]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-100 px-4 py-3",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsx)("span",{className:"ml-11 w-80 truncate text-sm font-medium text-gray-900",title:data.name,children:data.name}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)(ui_button.z,{variant:"secondary",size:"sm",className:"w-[140px] border-t border-[#66B512] bg-[#66B5124D] text-[#10384F] hover:bg-[#66b51293] hover:text-[#000]",children:"Set parameters"}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"secondary",size:"sm",className:data.finalized&&data.downloadUrl?"w-[140px] border-t border-[#66B512] bg-[#66B5124D] text-[#10384F] hover:bg-[#66b51293] hover:text-[#000]":"w-[140px] border-t border-[#b51212] bg-[#b512124d] text-[#10384F] hover:bg-[#b5121293] hover:text-[#000]",onClick:()=>{console.log("Scenario",data.name,"createdAt:",data.createdAt);const createdAt=new Date(data.createdAt),hoursSinceCreation=((new Date).getTime()-createdAt.getTime())/6e4;data.finalized&&data.downloadUrl?dist.Am.success("Scenario optimization is complete. You can download the result."):!data.finalized&&hoursSinceCreation>15?dist.Am.error("The scenario optimization could not be completed. Please review the parameters and try again."):data.finalized||data.downloadUrl||dist.Am.warning("Scenario optimization is in progress. Please wait a few moments and refresh the page.")},children:"Result"})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(ui_button.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>(setView({...data,snapshotName:snapshot.name}),void router.push(`/scenarios/view/${data.id}`)),title:"Visualizar cenário",children:(0,jsx_runtime.jsx)(react_icons_esm.hsE,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>{var fileUrl;(fileUrl=data.downloadUrl)&&window.open(fileUrl,"_blank")},disabled:!data.finalized||!data.downloadUrl,title:"Download resultado",children:(0,jsx_runtime.jsx)(react_icons_esm._8t,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>{try{const clonedScenarioData={snapshot:{id:snapshot.id,name:snapshot.name},scenario:{name:`${data.name} - Copy`,changes:data.changes?[...data.changes]:[]},uvpsku:{default:data.default||"all",uvps:data.uvps?data.uvps.map(uvp=>({...uvp,id:(0,v4.Z)(),sites:uvp.sites?uvp.sites.map(site=>({...site})):[]})):[],skus:data.skus?data.skus.map(skuGroup=>({...skuGroup,id:(0,v4.Z)(),open:!1,skus:skuGroup.skus?skuGroup.skus.map(sku=>({...sku,id:(0,v4.Z)(),defined_set:sku.defined_set?sku.defined_set.map(set=>({...set})):[]})):[]})):[]}};update(clonedScenarioData),router.push("/scenarios"),dist.Am.success(`Cenário "${data.name}" clonado com sucesso! Você pode agora modificar as configurações.`)}catch(error){console.error("Erro ao clonar cenário:",error),dist.Am.error("Erro ao clonar o cenário. Tente novamente.")}},title:"Clonar cenário",children:(0,jsx_runtime.jsx)(react_icons_esm.TIy,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-red-50 hover:text-red-700",onClick:async()=>{if(confirm("Tem certeza que deseja deletar este scenario?")){setIsDeleting(!0);try{const result=await async function deleteScenario(snapshotName,scenarioName){try{const response=await fetch(`http://localhost:5000/scenario/${snapshotName}/${scenarioName}`,{method:"DELETE"});var _returnData_message;return response.ok?{success:!0,message:(await response.json()).message}:{success:!1,message:null!==(_returnData_message=(await response.json()).message)&&void 0!==_returnData_message?_returnData_message:`Error: ${response.status} - ${response.statusText}`}}catch(error){return{success:!1,message:error.message||"Erro ao deletar scenario"}}}(snapshot.name,data.name);result.success?(dist.Am.success(result.message),window.location.reload()):dist.Am.error(result.message)}catch(error){dist.Am.error("Erro ao deletar scenario")}finally{setIsDeleting(!1)}}},disabled:isDeleting,title:"Deletar cenário",children:(0,jsx_runtime.jsx)(react_icons_esm.XHJ,{className:"h-4 w-4"})})]})]})}SnapshotItemScenario.__docgenInfo={description:"",methods:[],displayName:"SnapshotItemScenario",props:{data:{required:!0,tsType:{name:"any"},description:""},snapshot:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n  id: string;\n  name: string;\n  createdAt: string;\n  updatedAt: string;\n  scenarios: Scenario[];\n  customDatabaseFile?: string;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"createdAt",value:{name:"string",required:!0}},{key:"updatedAt",value:{name:"string",required:!0}},{key:"scenarios",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\r\n  id: string;\r\n  name: string;\r\n  finalized: boolean;\r\n  downloadUrl?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"finalized",value:{name:"boolean",required:!0}},{key:"downloadUrl",value:{name:"string",required:!1}},{key:"createdAt",value:{name:"string",required:!0}},{key:"updatedAt",value:{name:"string",required:!0}}]}}],raw:"Scenario[]",required:!0}},{key:"customDatabaseFile",value:{name:"string",required:!1}}]}},description:""}}};var createLucideIcon=__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js");const GitCompare=(0,createLucideIcon.Z)("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]),ChartNoAxesColumnIncreasing=(0,createLucideIcon.Z)("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);var badge=__webpack_require__("./src/components/ui/badge.tsx");function SnapshotItem({data,expanded,onToggle}){const router=(0,next_navigation.t)(),{reset,update}=(0,scenario.r)(),[isDeleting,setIsDeleting]=(0,react.useState)(!1),finalizedScenarios=data.scenarios.filter(scenario=>scenario.finalized);return(0,jsx_runtime.jsxs)("div",{className:"overflow-hidden rounded-md border border-gray-200 bg-white shadow-md",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-4",children:[(0,jsx_runtime.jsx)("span",{title:data.name,className:"w-80 truncate font-medium text-gray-900",children:data.name}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)("span",{className:"inline-flex w-32 items-center justify-center rounded-md bg-green-700 px-2 py-1 text-xs font-medium text-green-200",children:finalizedScenarios.length>0?"Available data":"Complete "})}),(0,jsx_runtime.jsx)("span",{className:"text-sm text-gray-500",children:finalizedScenarios.length>0?`${finalizedScenarios.length} Scenarios available`:"0 Scenarios available"}),data.customDatabaseFile&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("span",{className:"mx-2 text-gray-300 select-none",children:"|"}),(0,jsx_runtime.jsxs)(badge.C,{variant:"outline",className:"bg-white text-[#10384F] border-gray-300 font-medium px-3 py-1 rounded-full shadow-sm flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"w-2 h-2 rounded-full bg-[#15803d] inline-block"}),(()=>{const match=data.customDatabaseFile.match(/^(.*?)(_[0-9a-fA-F\-]{36})?\.(\w+)$/);return match?`${match[1]}.${match[3]}`:data.customDatabaseFile})()]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[(0,jsx_runtime.jsxs)(ui_button.z,{onClick:()=>{var _data_scenarios_length;reset();const lastScenario=null!==(_data_scenarios_length=data.scenarios.length)&&void 0!==_data_scenarios_length?_data_scenarios_length:1;update({snapshot:{id:data.id,name:data.name},scenario:{name:`Scenario ${lastScenario+1}`}}),router.push("/scenarios")},className:"inline-flex h-8 items-center gap-2 rounded-md border border-[#10384F] bg-white px-3 text-sm font-medium text-[#10384F] transition-colors hover:bg-[#10384F] hover:text-white whitespace-nowrap ml-5",children:["Add Scenario ",(0,jsx_runtime.jsx)(react_icons_esm.pOD,{className:"h-4 w-4"})]}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"ghost",size:"icon",className:"hover:bg-blue-50 hover:text-blue-700 shadow-none border-none ml-4",onClick:()=>router.push(`/scenarios/comparison?snapshot=${encodeURIComponent(data.name)}`),title:"Comparar cenários",children:(0,jsx_runtime.jsx)(GitCompare,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"ghost",size:"icon",className:"hover:bg-green-50 hover:text-green-700 shadow-none border-none mx-1",onClick:()=>router.push(`/scenarios/volume-comparison?snapshot=${encodeURIComponent(data.name)}`),title:"Comparar volumes",children:(0,jsx_runtime.jsx)(ChartNoAxesColumnIncreasing,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"outline",size:"icon",className:"hover:bg-red-50 hover:text-red-700 shadow-none border-none mr-4",onClick:async()=>{if(confirm("Tem certeza que deseja deletar este snapshot?")){setIsDeleting(!0);try{const result=await async function deleteSnapshot(name){try{const response=await fetch(`http://localhost:5000/snapshots/${name}`,{method:"DELETE"});var _returnData_message;return response.ok?{success:!0,message:(await response.json()).message}:{success:!1,message:null!==(_returnData_message=(await response.json()).message)&&void 0!==_returnData_message?_returnData_message:`Error: ${response.status} - ${response.statusText}`}}catch(error){return{success:!1,message:error.message||"Erro ao deletar snapshot"}}}(data.name);result.success?(dist.Am.success(result.message),window.location.reload()):dist.Am.error(result.message)}catch(error){dist.Am.error("Erro ao deletar snapshot")}finally{setIsDeleting(!1)}}},disabled:isDeleting,children:(0,jsx_runtime.jsx)(react_icons_esm.XHJ,{})}),(0,jsx_runtime.jsx)("div",{className:"w-px h-5 bg-gray-200"}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"ghost",size:"sm",className:"ml-4 h-6 w-6 p-0",onClick:()=>null==onToggle?void 0:onToggle(),children:(0,jsx_runtime.jsx)(react_icons_esm.g8U,{className:"h-4 w-4 transition-transform "+(expanded?"":"rotate-180")})})]})]}),expanded&&(0,jsx_runtime.jsx)("div",{className:"border-t border-gray-100",children:data.scenarios.length>0?data.scenarios.map(scenario=>(0,jsx_runtime.jsx)(SnapshotItemScenario,{data:scenario,snapshot:data},scenario.id)):(0,jsx_runtime.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,jsx_runtime.jsx)("p",{className:"text-gray-500",children:"No scenarios available for this snapshot"})})})]})}async function downloadDataCsv(){return async function generateDownloadLink(key){const response=await fetch(`http://localhost:5000/informations/download/${encodeURIComponent(key)}`,{method:"GET"});if(!response.ok)return{success:!1,message:`Error: ${response.status} - ${response.statusText}`,url:""};const data=await response.json();return{success:data.success,url:data.url,message:data.success?"Download link generated successfully":"Failed to generate download link"}}("informations/template.csv")}SnapshotItem.__docgenInfo={description:"",methods:[],displayName:"SnapshotItem",props:{data:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n  id: string;\n  name: string;\n  createdAt: string;\n  updatedAt: string;\n  scenarios: Scenario[];\n  customDatabaseFile?: string;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"createdAt",value:{name:"string",required:!0}},{key:"updatedAt",value:{name:"string",required:!0}},{key:"scenarios",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\r\n  id: string;\r\n  name: string;\r\n  finalized: boolean;\r\n  downloadUrl?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"finalized",value:{name:"boolean",required:!0}},{key:"downloadUrl",value:{name:"string",required:!1}},{key:"createdAt",value:{name:"string",required:!0}},{key:"updatedAt",value:{name:"string",required:!0}}]}}],raw:"Scenario[]",required:!0}},{key:"customDatabaseFile",value:{name:"string",required:!1}}]}},description:""},expanded:{required:!1,tsType:{name:"boolean"},description:""},onToggle:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var dialog=__webpack_require__("./src/components/ui/dialog.tsx");const Modal=({title,description,isOpen,onClose,children})=>(0,jsx_runtime.jsx)(dialog.Vq,{open:isOpen,onOpenChange:open=>{open||onClose()},children:(0,jsx_runtime.jsxs)(dialog.cZ,{children:[(0,jsx_runtime.jsxs)(dialog.fK,{children:[(0,jsx_runtime.jsx)(dialog.$N,{children:title}),(0,jsx_runtime.jsx)(dialog.Be,{children:description})]}),(0,jsx_runtime.jsx)("div",{children})]})});Modal.__docgenInfo={description:"",methods:[],displayName:"Modal"};var tooltip=__webpack_require__("./src/components/ui/tooltip.tsx"),snapshots_view_console=__webpack_require__("./node_modules/console-browserify/index.js");function SnapshotsView({snapshots}){const searchParams=(0,next_navigation.l)(),snapshotId=searchParams?searchParams.get("snapshot"):null,[loading,setLoading]=(0,react.useState)(!1),[expandedSnapshots,setExpandedSnapshots]=(0,react.useState)([]),[currentSnapshots,setCurrentSnapshots]=(0,react.useState)(null!=snapshots?snapshots:[]),[snapshotNew,setSnapshotNew]=(0,react.useState)(!1),[snapshotNewName,setSnapshotNewName]=(0,react.useState)(""),[uploadModalOpen,setUploadModalOpen]=(0,react.useState)(!1),[uploadSnapshotName,setUploadSnapshotName]=(0,react.useState)(""),[selectedFile,setSelectedFile]=(0,react.useState)(null),fileInputRef=(0,react.useRef)(null),[downloadLoading,setDownloadLoading]=(0,react.useState)(!1),[uploadLoading,setUploadLoading]=(0,react.useState)(!1);(0,react.useEffect)(()=>{if(snapshotId){const snapshot=currentSnapshots.find(snapshot=>snapshot.id===snapshotId);snapshot&&setExpandedSnapshots([snapshot.id])}},[snapshotId]);const handleCreateSnapshot=async()=>{setLoading(!0);const response=await async function createSnapshot(name){const response=await fetch("http://localhost:5000/snapshots",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({name})});var _returnData_message;return response.ok?response.json():{message:null!==(_returnData_message=(await response.json()).message)&&void 0!==_returnData_message?_returnData_message:`Error: ${response.status} - ${response.statusText}`}}(snapshotNewName);response.id&&(setLoading(!1),setSnapshotNew(!1),setSnapshotNewName(""),setCurrentSnapshots(prev=>[...prev,response])),setLoading(!1)};return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between rounded-md bg-[#D3E1E5] px-4 py-3",children:[(0,jsx_runtime.jsx)("h2",{className:"text-base font-medium text-gray-700",children:"Upload Latest Data"}),(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-2 text-sm text-gray-500",children:["Create snapshot with original file",(0,jsx_runtime.jsx)(ui_button.z,{size:"icon",variant:"default",onClick:async()=>{setSnapshotNew(!0),setSnapshotNewName(`SnapShot_${(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).split("/").join("_")} - ${(new Date).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}`)},className:"bg-[#10384F] text-sm hover:bg-[#071c29]",children:(0,jsx_runtime.jsx)(react_icons_esm.pOD,{})}),(0,jsx_runtime.jsx)(tooltip.pn,{children:(0,jsx_runtime.jsxs)(tooltip.u,{children:[(0,jsx_runtime.jsx)(tooltip.aJ,{asChild:!0,children:(0,jsx_runtime.jsx)(ui_button.z,{size:"icon",variant:"default",onClick:()=>{setUploadModalOpen(!0),setUploadSnapshotName(`[Custom] SnapShot_${(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).split("/").join("_")} - ${(new Date).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}`),setSelectedFile(null)},className:"bg-[#10384F] text-sm hover:bg-[#071c29]","aria-label":"Upload snapshot",children:(0,jsx_runtime.jsx)(react_icons_esm.JtS,{})})}),(0,jsx_runtime.jsx)(tooltip._v,{children:"Create snapshot with custom file"})]})})]})]}),(0,jsx_runtime.jsx)(Modal,{title:"Update dataset for snapshot",description:"",isOpen:uploadModalOpen,onClose:()=>setUploadModalOpen(!1),children:(0,jsx_runtime.jsxs)("div",{className:"rounded-md bg-white p-4",children:[(0,jsx_runtime.jsxs)("div",{className:"mb-4",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"uploadSnapshotName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Snapshot Name"}),(0,jsx_runtime.jsx)("input",{id:"uploadSnapshotName",type:"text",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-[#10384F] focus:outline-none focus:ring-1 focus:ring-[#10384F]",value:uploadSnapshotName,onChange:e=>setUploadSnapshotName(e.target.value),disabled:uploadLoading})]}),(0,jsx_runtime.jsxs)("ol",{className:"space-y-6 list-decimal list-inside",children:[(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("span",{className:"font-semibold",children:"Download the file:"})," Click on the button below to download the necessary file.",(0,jsx_runtime.jsx)("div",{className:"mt-4",children:(0,jsx_runtime.jsxs)(ui_button.z,{className:"bg-[#10384F] text-white",onClick:async()=>{setDownloadLoading(!0);try{const response=await downloadDataCsv();response.success&&response.url?window.open(response.url,"_blank"):snapshots_view_console.error("Failed to download file:",response.message)}catch(error){snapshots_view_console.error("Error downloading file:",error)}finally{setDownloadLoading(!1)}},disabled:downloadLoading,children:[downloadLoading?"Generating download...":"Download file",(0,jsx_runtime.jsx)(react_icons_esm.Hf3,{className:"ml-2 rotate-180"})]})})]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("span",{className:"font-semibold",children:"Apply the changes:"})," Open the file and make the desired changes to generate the new snapshot that will be used to simulate the scenarios. Make sure you check your information before saving."]}),(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)("span",{className:"font-semibold",children:"Upload the file:"})," After filling in the file, attach the updated document.",(0,jsx_runtime.jsx)("div",{className:"mt-4",children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-md border-2 border-dashed border-gray-300 bg-gray-100 py-8",children:[(0,jsx_runtime.jsxs)(ui_button.z,{className:"text-[#10384F] bg-gray-100 shadow-none hover:bg-white",type:"button",onClick:()=>{var _fileInputRef_current;return null===(_fileInputRef_current=fileInputRef.current)||void 0===_fileInputRef_current?void 0:_fileInputRef_current.click()},disabled:uploadLoading,children:["Upload file",(0,jsx_runtime.jsx)(react_icons_esm.Hf3,{className:"ml-2"})]}),(0,jsx_runtime.jsx)("input",{type:"file",ref:fileInputRef,className:"hidden",accept:".csv",onChange:e=>{e.target.files&&e.target.files[0]&&setSelectedFile(e.target.files[0])}}),selectedFile&&(0,jsx_runtime.jsx)("span",{className:"mt-2 block text-xs text-gray-600 truncate max-w-xs",children:selectedFile.name})]})})]})]}),(0,jsx_runtime.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,jsx_runtime.jsx)(ui_button.z,{variant:"outline",onClick:()=>setUploadModalOpen(!1),disabled:uploadLoading,children:"Cancel"}),(0,jsx_runtime.jsx)(ui_button.z,{className:"bg-[#10384F] text-white hover:bg-[#004670]",onClick:async()=>{if(selectedFile){setUploadLoading(!0);try{const response=await async function snapshot_create_custom_service_createSnapshotWithCustomFile(name,file){const formData=new FormData;return formData.append("name",name),formData.append("file",file),(await fetch("/api/snapshots/upload",{method:"POST",body:formData})).json()}(uploadSnapshotName,selectedFile);response.id?(setUploadLoading(!1),setUploadModalOpen(!1),setUploadSnapshotName(""),setSelectedFile(null),setCurrentSnapshots(prev=>[...prev,response])):alert(response.message||"Error creating snapshot")}catch(error){snapshots_view_console.error("Error creating snapshot with custom file:",error),alert("Error creating snapshot with custom file")}setUploadLoading(!1)}else alert("Please select a file first")},disabled:uploadLoading||!selectedFile||!uploadSnapshotName.trim(),children:uploadLoading?"Creating Snapshot...":"Create Snapshot"})]})]})}),(0,jsx_runtime.jsxs)("div",{className:"space-y-3",children:[snapshotNew&&(0,jsx_runtime.jsx)("div",{className:"rounded-md bg-white p-6 shadow-md",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-4",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"snapshotName",className:"whitespace-nowrap text-sm font-medium text-gray-700",children:"Name"}),(0,jsx_runtime.jsx)("input",{id:"snapshotName",type:"text",className:"w-[300px] flex-1 rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-[#10384F] focus:outline-none focus:ring-1 focus:ring-[#10384F]",defaultValue:snapshotNewName,onChange:e=>setSnapshotNewName(e.target.value),disabled:loading})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-3",children:[(0,jsx_runtime.jsx)(ui_button.z,{variant:"outline",className:"border-gray-300 hover:bg-gray-50",onClick:()=>{setSnapshotNew(!1)},disabled:loading,children:"Cancel"}),(0,jsx_runtime.jsx)(ui_button.z,{className:"bg-[#10384F] text-white hover:bg-[#004670]",onClick:()=>handleCreateSnapshot(),disabled:loading,children:loading?"Running Snapshot...":"Run Snapshot"})]})]})}),0===currentSnapshots.length?(0,jsx_runtime.jsx)("div",{className:"rounded-md bg-white p-6 text-center shadow-md",children:(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-500 pt-40 pb-40",children:"No snapshots found"})}):currentSnapshots.sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime()).map(snapshot=>(0,jsx_runtime.jsx)(SnapshotItem,{data:snapshot,onToggle:()=>{return snapshotName=snapshot.id,void setExpandedSnapshots(prev=>prev.includes(snapshotName)?prev.filter(name=>name!==snapshotName):[...prev,snapshotName]);var snapshotName},expanded:expandedSnapshots.includes(snapshot.id)},snapshot.id))]})]})}SnapshotsView.__docgenInfo={description:"",methods:[],displayName:"SnapshotsView",props:{snapshots:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  name: string;\n  createdAt: string;\n  updatedAt: string;\n  scenarios: Scenario[];\n  customDatabaseFile?: string;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"createdAt",value:{name:"string",required:!0}},{key:"updatedAt",value:{name:"string",required:!0}},{key:"scenarios",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\r\n  id: string;\r\n  name: string;\r\n  finalized: boolean;\r\n  downloadUrl?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"finalized",value:{name:"boolean",required:!0}},{key:"downloadUrl",value:{name:"string",required:!1}},{key:"createdAt",value:{name:"string",required:!0}},{key:"updatedAt",value:{name:"string",required:!0}}]}}],raw:"Scenario[]",required:!0}},{key:"customDatabaseFile",value:{name:"string",required:!1}}]}}],raw:"Snapshot[]"},description:""}}};const SnapshotsView_stories={title:"Pages/SnapshotsView",component:SnapshotsView,tags:["autodocs"],parameters:{docs:{description:{component:"Visualização principal dos Snapshots, com ações e cenários."}}}},Default={args:{snapshots:[{id:"1",name:"Snapshot 1",scenarios:[],customDatabaseFile:"",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:"2",name:"Snapshot 2",scenarios:[],customDatabaseFile:"",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}]}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    snapshots: mockSnapshots\n  }\n}",...Default.parameters?.docs?.source}}}},"./.storybook/__mocks__/next-navigation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>useSearchParams,t:()=>useRouter});const useRouter=()=>({push:()=>{},replace:()=>{},prefetch:()=>{},pathname:"/",query:{}}),useSearchParams=()=>({get:()=>null})},"./src/components/ui/badge.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>Badge});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),class_variance_authority__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs")),_utils_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/utils.ts");const badgeVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_3__.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className,variant,...props}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_utils_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(badgeVariants({variant}),className),...props})}Badge.__docgenInfo={description:"",methods:[],displayName:"Badge",composes:["VariantProps"]}},"./src/components/ui/button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>buttonVariants,z:()=>Button});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs"),class_variance_authority__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_utils_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/utils.ts");const buttonVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_3__.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-md hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-md hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-md hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Button=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,variant,size,asChild=!1,...props},ref)=>{const Comp=asChild?_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_4__.g7:"button";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Comp,{className:(0,_utils_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(buttonVariants({variant,size,className})),ref,...props})});Button.displayName="Button",Button.__docgenInfo={description:"",methods:[],displayName:"Button",props:{asChild:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}},composes:["VariantProps"]}},"./src/components/ui/dialog.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$N:()=>DialogTitle,Be:()=>DialogDescription,Vq:()=>Dialog,cN:()=>DialogFooter,cZ:()=>DialogContent,fK:()=>DialogHeader,hg:()=>DialogTrigger});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-dialog/dist/index.mjs"),_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@radix-ui/react-icons/dist/react-icons.esm.js"),_utils_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/utils.ts");const Dialog=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.fC,DialogTrigger=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.xz,DialogPortal=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.h_,DialogOverlay=(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.x8,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.aV,{ref,className:(0,_utils_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",className),...props})));DialogOverlay.displayName=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.aV.displayName;const DialogContent=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,children,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(DialogPortal,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DialogOverlay,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.VY,{ref,className:(0,_utils_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",className),...props,children:[children,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_4__.Pxu,{className:"h-4 w-4"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));DialogContent.displayName=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.VY.displayName;const DialogHeader=({className,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_utils_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("flex flex-col space-y-1.5 text-center sm:text-left",className),...props});DialogHeader.displayName="DialogHeader";const DialogFooter=({className,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_utils_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",className),...props});DialogFooter.displayName="DialogFooter";const DialogTitle=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.Dx,{ref,className:(0,_utils_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("text-lg font-semibold leading-none tracking-tight",className),...props}));DialogTitle.displayName=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.Dx.displayName;const DialogDescription=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.dk,{ref,className:(0,_utils_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("text-sm text-muted-foreground",className),...props}));DialogDescription.displayName=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.dk.displayName,DialogOverlay.__docgenInfo={description:"",methods:[]},DialogContent.__docgenInfo={description:"",methods:[]},DialogHeader.__docgenInfo={description:"",methods:[],displayName:"DialogHeader"},DialogFooter.__docgenInfo={description:"",methods:[],displayName:"DialogFooter"},DialogTitle.__docgenInfo={description:"",methods:[]},DialogDescription.__docgenInfo={description:"",methods:[]}},"./src/components/ui/tooltip.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_v:()=>TooltipContent,aJ:()=>TooltipTrigger,pn:()=>TooltipProvider,u:()=>Tooltip});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-tooltip/dist/index.mjs"),_utils_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/utils.ts");const TooltipProvider=_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.zt,Tooltip=_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.fC,TooltipTrigger=_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.xz,TooltipContent=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({className,sideOffset=4,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.VY,{ref,sideOffset,className:(0,_utils_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",className),...props}));TooltipContent.displayName=_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.VY.displayName,TooltipContent.__docgenInfo={description:"",methods:[],props:{sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}}},"./src/store/scenario.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>useScenarioStore});var zustand__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/zustand/esm/index.mjs"),zustand_middleware__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/zustand/esm/middleware.mjs");const useScenarioStore=(0,zustand__WEBPACK_IMPORTED_MODULE_0__.Ue)()((0,zustand_middleware__WEBPACK_IMPORTED_MODULE_1__.tJ)(set=>({data:{snapshot:{},scenario:{},uvpsku:{}},view:{snapshot:{},scenario:{},uvpsku:{}},update:newData=>set(state=>({data:{...state.data,...newData}})),reset:()=>set({data:{snapshot:{},scenario:{},uvpsku:{}}}),setView:item=>set(state=>({view:item}))}),{name:"scenario-storage"}))},"./src/utils/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{JN:()=>generateUvps,Nu:()=>generateLines,V7:()=>generateSites,cn:()=>cn,ig:()=>generateSkus,xM:()=>decodeId,xN:()=>generateSkusSites});var clsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),tailwind_merge__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tailwind-merge/dist/lib/tw-merge.mjs"),Buffer=__webpack_require__("./node_modules/node-polyfill-webpack-plugin/node_modules/buffer/index.js").lW;const encodeId=data=>Buffer.from(data).toString("base64"),decodeId=encodedData=>Buffer.from(encodedData,"base64").toString();function cn(...inputs){return(0,tailwind_merge__WEBPACK_IMPORTED_MODULE_0__.m)((0,clsx__WEBPACK_IMPORTED_MODULE_1__.W)(inputs))}function generateLines(data){const format=data.map(d=>{var _d_plant_sap,_ref,_ref1;return`${null!==(_ref1=null!==(_ref=null!==(_d_plant_sap=d.plant_sap)&&void 0!==_d_plant_sap?_d_plant_sap:d.sap_code)&&void 0!==_ref?_ref:d.formulation_plant)&&void 0!==_ref1?_ref1:d.comm_plant}@${d.line}@${"YES"===d.tech_restriction?"YES":"NO"}`});return[...new Set(format)].map(item=>{const[sap,line,restriction]=item.split("@");return{id:encodeId(item),sap,line,restriction}})}function generateUvps(data){const format=data.map(d=>`${d.uvp}@${d.unpacked_goods_uvp_1}`);return[...new Set(format)].map(item=>{const[uvpCode,uvpName]=item.split("@");return{id:encodeId(item),uvpCode,uvpName,label:`${uvpCode} - ${uvpName}`}})}function generateSites(data){const format=data.map(d=>{var _d_sap_code,_ref,_ref1;return`${null!==(_ref1=null!==(_ref=null!==(_d_sap_code=d.sap_code)&&void 0!==_d_sap_code?_d_sap_code:d.plant_sap)&&void 0!==_ref?_ref:d.formulation_plant)&&void 0!==_ref1?_ref1:d.comm_plant}@${d.formulation_plant_name}@${d.reg_restriction}@${d.uvp}`});return[...new Set(format)].map(item=>{const[sap,name,restriction,uvp]=item.split("@");return{id:encodeId(item),sap,name,restriction,uvp,label:`${sap} - ${name}`}})}function generateSkus(data){const format=data.map(d=>`${d.uvp}@${d.sku_code}@${d.sku}`);return[...new Set(format)].map(item=>{const[uvpCode,skuCode,skuName]=item.split("@"),id=encodeId(item),label=`${skuCode} - ${skuName}`;return data.find(s=>String(s.sku_code)===String(skuCode)&&String(s.uvp)===String(uvpCode)&&!0===s.current_state)?{id,uvpCode,skuCode,skuName,label}:null}).filter(item=>null!==item)}function generateSkusSites(data){const format=data.map(d=>{var _d_sap_code,_ref,_ref1;return`${null!==(_ref1=null!==(_ref=null!==(_d_sap_code=d.sap_code)&&void 0!==_d_sap_code?_d_sap_code:d.plant_sap)&&void 0!==_ref?_ref:d.formulation_plant)&&void 0!==_ref1?_ref1:d.comm_plant}@${d.uvp}@${d.sku_code}@${d.cenario}@${d.reg_restriction}@${d.tech_restriction}`});return[...new Set(format)].map(item=>{const[sapCode,uvpCode,skuCode,cenario,restriction,tech_restriction]=item.split("@");return{id:encodeId(item),sapCode,uvpCode,skuCode,cenario,restriction,tech_restriction,label:`${cenario}`}})}}}]);